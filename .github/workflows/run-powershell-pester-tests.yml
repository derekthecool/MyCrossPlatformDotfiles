name: Run Pester Tests

on: [push, pull_request]

jobs:
  test:
    name: Pester Test Runner
    runs-on: windows-latest

    steps:
      - name: Check out repository code
        uses: actions/checkout@v2

      - name: Set up PowerShell
        uses: actions/setup-powershell@v1

      - name: Install Pester
        shell: pwsh
        run: |
          Install-Module -Name Pester -RequiredVersion 5.3.1 -Force -SkipPublisherCheck

      - name: Run Pester Tests
        shell: pwsh
        run: |
          Invoke-Pester -Path './MyCrossPlatformScripts/Tests' -Passthru -Output Detailed
